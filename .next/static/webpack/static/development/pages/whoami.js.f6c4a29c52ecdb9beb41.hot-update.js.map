{"version":3,"file":"static/webpack/static\\development\\pages\\whoami.js.f6c4a29c52ecdb9beb41.hot-update.js","sources":["webpack:///./pages/whoami.js"],"sourcesContent":["import axios from 'axios';\r\nimport { connect } from 'react-redux';\r\nimport { reauthenticate, getCookie } from '../actions/authActions';\r\nimport Router from 'next/router';\r\nimport Layout from '../components/Layout/Layout';\r\n\r\nconst Whoami =({user}) => {\r\n    <Layout title = \"Who Am I\">\r\n        {(user &&  (\r\n            <>\r\n            <h2>Who im i</h2>\r\n                {JSON.stringify(user)}\r\n            </>\r\n        )) ||'Please sign in'}\r\n    </Layout>\r\n}\r\n\r\nWhoami.getInitialProps = async ctx =>  {\r\n    console.log(ctx.store.getState());\r\n    if(ctx.isServer){\r\n        if (ctx.req.headers.cookie) {\r\n            const token = getCookie('token', ctx.req);\r\n            console.log('WHOAMI ', token);\r\n            ctx.store.dispatch(reauthenticate(token));\r\n          }\r\n    } else {\r\n    const token = ctx.store.getState().authentication.token;\r\n\r\n    if (token && (ctx.pathname === '/signin' || ctx.pathname === '/signup')) {\r\n      setTimeout(function() {\r\n        Router.push('/');\r\n      }, 0);\r\n    }\r\n  }\r\n   const token = ctx.store.getState().authentication.token;\r\n    if(token){\r\n        return {user: 'Ryan'};\r\n    }\r\n}\r\n\r\nexport default connect(state => state, { reauthenticate })(Whoami);"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAlBA;AAAA;AAAA;AAAA;AACA;AADA;AAmBA;AAAA;AACA;AApBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAsBA;AAAA;AAAA;AAAA;AAAA;;;;A","sourceRoot":""}